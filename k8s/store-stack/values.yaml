# Default values for store-stack umbrella chart
# This aggregates values from nginx-service, redis-service, and httpbin-service

# Global namespace (can be overridden per service)
namespace: default

# nginx-service configuration
nginx-service:
  replicaCount: 1
  
  image:
    repository: nginx
    tag: "1.27.0"
    pullPolicy: IfNotPresent
  
  service:
    type: ClusterIP
    port: 80
    targetPort: 80
  
  resources:
    limits:
      cpu: 100m
      memory: 128Mi
    requests:
      cpu: 50m
      memory: 64Mi
  
  env:
    NGINX_HOST: localhost
    NGINX_PORT: "80"
    APP_ENV: production
  
  labels: {}
  podAnnotations: {}

# redis-service configuration
redis-service:
  replicaCount: 1
  
  image:
    repository: redis
    tag: "7.2.0"
    pullPolicy: IfNotPresent
  
  service:
    type: ClusterIP
    port: 6379
    targetPort: 6379
  
  resources:
    limits:
      cpu: 200m
      memory: 256Mi
    requests:
      cpu: 100m
      memory: 128Mi
  
  env:
    REDIS_MAXMEMORY: "128mb"
    REDIS_MAXMEMORY_POLICY: "allkeys-lru"
    REDIS_LOGLEVEL: "notice"
  
  redisArgs:
    - "--maxmemory"
    - "128mb"
    - "--maxmemory-policy"
    - "allkeys-lru"
  
  labels: {}
  podAnnotations: {}

# httpbin-service configuration
httpbin-service:
  replicaCount: 1
  
  image:
    repository: kennethreitz/httpbin
    tag: "latest"
    pullPolicy: IfNotPresent
  
  service:
    type: ClusterIP
    port: 80
    targetPort: 80
  
  resources:
    limits:
      cpu: 100m
      memory: 128Mi
    requests:
      cpu: 50m
      memory: 64Mi
  
  env:
    GUNICORN_CMD_ARGS: "--capture-output --error-logfile - --access-logfile - --access-logformat '%(h)s %(t)s %(r)s %(s)s'"
    APP_ENV: production
    LOG_LEVEL: info
  
  labels: {}
  podAnnotations: {}
